(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{80918:function(e,a,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return i(76270)}])},76270:function(e,a,i){"use strict";i.r(a),i.d(a,{default:function(){return P}});var t=i(85893),s=i(51403),l=i(47720),r=i(815),n=i(11163),o=i(67294),d=i(34051),c=i(31555),m=i(87536),u=i(86893),g=i(18236),x=i.n(g),p=i(90521),h=i.n(p),f=i(72965),j=i.n(f);i(6067);var S=i(14755),v=i.n(S);i(36208);var _=i(73042),b=i(40782),z=i(86455),y=i.n(z),w=i(39327),N=i(82011),T=i.n(N);let V=e=>{let{title:a,handleDelete:i,defaultFile:l}=e;return(0,t.jsxs)(t.Fragment,{children:[a&&(0,t.jsx)("label",{className:T().inputTitle,children:a}),(0,t.jsx)("div",{className:T().imageContainer,style:{backgroundImage:"url(".concat(l,")")},children:(0,t.jsxs)(s.Z,{className:" danger outline ".concat(T().buttonRemoveCoverPicture),type:"button",onClick:i,children:[(0,t.jsx)(w.bqj,{})," Remover"]})})]})};var M=i(75647),E=i(78676),Z=i(9669),C=i.n(Z);let F=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=await M.hi.post(a.signedStorageUrl?a.signedStorageUrl:"/vapor/signed-storage-url",{bucket:a.bucket||"",content_type:a.contentType||e.type,expires:a.expires||"",visibility:"public-read",...a.data},{headers:{Authorization:"Bearer ".concat((0,E.Tr)())},...a.options});if(200!==i.status&&201!==i.status)throw Error(i.data.error);let t=i.data.headers;"Host"in t&&delete t.Host,void 0===a.progress&&(a.progress=()=>{});let s=a.cancelToken||"";return await C().put(i.data.url,e,{cancelToken:s,headers:t,onUploadProgress(e){a.progress(e.loaded/e.total)}}),i.data.extension=e.name.split(".").pop(),i.data};(0,_.fo)(j()),(0,_.fo)(v()),(0,_.fo)(x()),(0,_.fo)(h());let k=e=>{let{title:a,description:i=null,errors:s,fileDescription:l,callback:r,onStart:n,onDelete:d,defaultFile:c,fileSizeValidation:m,fileTypeValidation:u,imageSizeValidation:g}=e,[x,p]=(0,o.useState)([]),[h,f]=(0,o.useState)(c),[j,S]=(0,o.useState)(null);(0,o.useEffect)(()=>{null!==j&&r&&r(j,a)},[j]);let v=(e,a,i,t,s,l,r)=>{n&&n(!0),F(a,{async progress(e){l(Math.round(100*e))},abort:r}).then(e=>{t(e),S(e)}).catch(e=>{b.Am.error("N\xe3o foi poss\xedvel fazer o upload da imagem."),f(null),r(),p(null),S(null),d&&d()})},z=e=>{y().fire({title:"Voc\xea tem certeza?",text:"Deseja mesmo deletar este arquivo?",icon:"question",showDenyButton:!0,confirmButtonText:"\uD83D\uDD25 Sim, quero deletar",denyButtonText:"N\xe3o! Leve-me de volta."}).then(async e=>{e.isConfirmed&&(f(null),d())})};return h?(0,t.jsx)(V,{title:a,handleDelete:z,defaultFile:c}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("fieldset",{className:T().uploadContainer,children:[a&&(0,t.jsx)("label",{className:T().inputTitle,children:a}),(0,t.jsx)("div",{className:T().coverPicture,children:(0,t.jsx)(_.Q9,{name:"files",labelIdle:(i||(i=""),g&&(i+="Medidas Exigidas:  "+"<strong>".concat(g.imageValidateSizeMaxWidth,"px</strong> x ")+"<strong>".concat(g.imageValidateSizeMaxHeight,"px</strong> ")),u?(i+=" Formatos Aceitos: ",u.acceptedFileTypes.forEach(e=>{i+="<strong>".concat(e,"</strong>, ")})):i+=" Formatos aceitos: <strong>.png</strong>, <strong>.jpg</strong> ou <strong>.jpeg</strong>",m&&(i+="<br />Tamanho M\xe1ximo: <br /> "+"".concat(m.maxTotalFileSize,"MB")),"<b>Arraste um arquivo ou clique para procurar</b>"),files:x,onupdatefiles:p,allowFileTypeValidation:!!u,acceptedFileTypes:u?u.acceptedFileTypes:[],labelFileTypeNotAllowed:u?u.labelFileTypeNotAllowed:"",allowImageValidateSize:!!g,imageValidateSizeMaxWidth:g&&g.imageValidateSizeMaxWidth,imageValidateSizeMaxHeight:g&&g.imageValidateSizeMaxHeight,imageValidateSizeMinWidth:g&&g.imageValidateSizeMinWidth,imageValidateSizeMinHeight:g&&g.imageValidateSizeMinHeight,imageValidateSizeLabelImageSizeTooSmall:g&&g.imageSizeErrorLabel,imageValidateSizeLabelImageSizeTooBig:g&&g.imageSizeErrorLabel,imageValidateSizeLabelExpectedMinSize:g&&g.imageSizeErrorLabel,imageValidateSizeLabelExpectedMaxSize:g&&g.imageSizeErrorLabel,allowMultiple:!1,maxFiles:1,server:{timeout:30,process:v},onremovefile(e,a){p(null),S(null),d&&d()}})}),i&&(0,t.jsx)("span",{className:T().description,dangerouslySetInnerHTML:{__html:i}}),s&&(0,t.jsx)("span",{className:T().error,children:s.message})]})})};var L=i(2438),A=i(10830),D=i.n(A);let H=()=>{let[e,a]=(0,o.useState)(!1),{update:i,me:g,user:x,isSetting:p,changePassword:h}=(0,r.aC)(),[f,j]=(0,o.useState)(!0);(0,n.useRouter)();let{register:S,handleSubmit:v,setValue:_,watch:b,formState:{errors:z}}=(0,m.cI)(),y=e=>{i(e)},w=e=>{h(e)},N=(e,i)=>{var t;_("".concat(i),null!==(t=null==e?void 0:e.key)&&void 0!==t?t:null),a(!1)},T=e=>{_("".concat(e),"")};return((0,o.useEffect)(()=>{if(x){let e=["name","email","avatar","password"];Object.keys(x).forEach(a=>{e.includes(a)&&_(a,x[a])}),j(!1)}},[x]),(0,o.useCallback)(()=>{g()},[]),f)?(0,t.jsx)(L.k,{fullPage:!0}):(0,t.jsxs)("div",{className:D().profileContainer,children:[(0,t.jsx)("div",{className:D().content,children:(0,t.jsxs)("form",{onSubmit:v(y),children:[(0,t.jsx)("h1",{children:"Dados B\xe1sicos"}),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(c.Z,{md:4,children:(0,t.jsx)(k,{title:"Foto de Perfil",imageSizeValidation:{imageValidateSizeMaxWidth:1080,imageValidateSizeMaxHeight:1080,imageValidateSizeMinWidth:50,imageValidateSizeMinHeight:50,imageSizeErrorLabel:"As dimens\xf5es da imagem s\xe3o inv\xe1lidas."},fileTypeValidation:{acceptedFileTypes:["image/png","image/gif","image/jpg","image/jpeg"],labelFileTypeNotAllowed:"Formato de Arquivo Inv\xe1lido"},onStart:()=>a(!0),onDelete:e=>T("avatar"),defaultFile:b("avatar"),callback:e=>N(e,"avatar")})}),(0,t.jsx)(c.Z,{md:8,children:(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(c.Z,{md:6,children:(0,t.jsx)(l.Z,{title:"Nome",maxLength:200,errors:z.name,...S("name")})}),(0,t.jsx)(c.Z,{md:6,children:(0,t.jsx)(l.Z,{title:"Email",type:"email",disabled:!0,maxLength:100,errors:z.email,...S("email")})}),(0,t.jsx)(c.Z,{md:12,children:(0,t.jsxs)(s.Z,{className:"success",isChanging:p,children:[" ","Salvar Dados do Usu\xe1rio ",(0,t.jsx)(u.Rgz,{})," "]})})]})})]})]})}),(0,t.jsx)("div",{className:D().content,children:(0,t.jsxs)("form",{id:"quizForm",onSubmit:v(w),children:[(0,t.jsx)("h1",{children:"Altera\xe7\xe3o de Senha"}),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(c.Z,{md:12,children:(0,t.jsx)(l.Z,{title:"Sua senha atual",type:"password",maxLength:200,errors:z.password,...S("old_password")})}),(0,t.jsx)(c.Z,{md:12,children:(0,t.jsx)(l.Z,{title:"Nova senha",type:"password",maxLength:200,errors:z.password,...S("password")})}),(0,t.jsx)(c.Z,{md:12,children:(0,t.jsx)(l.Z,{title:"Confirmar Senha",type:"password",maxLength:100,errors:z.password_confirmation,...S("password_confirmation")})}),(0,t.jsx)(c.Z,{md:12,children:(0,t.jsxs)(s.Z,{className:"success",isChanging:p,children:[" ","Alterar Senha ",(0,t.jsx)(u.Rgz,{})," "]})})]})]},"form_elements")})]})},I=()=>(0,t.jsx)(H,{});var P=I},82011:function(e){e.exports={coverPicture:"styles_coverPicture__8UUJk",imageContainer:"styles_imageContainer__aHoAx",uploadContainer:"styles_uploadContainer__ssnth",error:"styles_error__aImAy",description:"styles_description__mJSeD"}},10830:function(e){e.exports={profileContainer:"styles_profileContainer__mubls",content:"styles_content__AtsE1"}}},function(e){e.O(0,[90,719,536,455,491,774,888,179],function(){return e(e.s=80918)}),_N_E=e.O()}]);